{{- $ := .dot -}}
<article itemscope itemtype="http://schema.org/CreativeWork">
{{ partial "pub_fmt/book_title" . -}},
{{ delimit (apply (apply  $.Params.author "partial" "pub_fmt/authors" ".") "chomp" ".") ", " -}},
{{ partial "pub_fmt/publisher" . -}}.
{{- if gt .doi 0 -}}
{{- partial "pub_fmt/doi" . -}}
{{- end -}}
{{- if gt .amazon 0 }}
{{ partial "pub_fmt/amazon" . -}}
{{- end }}
{{- if gt .pdf 0 }}
{{ partial "pub_fmt/pdf" . -}}
{{- end }}
{{- if isset $.Params "author" -}}
  {{- $author_names := apply (apply $.Params.author "partial" "pub_fmt/author" ".") "chomp" "." -}}
  {{- range $author_names -}}
  <meta itemprop="author" content="{{ . | markdownify }}"/>
  {{- end -}}
{{- end -}}
{{- if isset $.Params "editor" -}}
  {{- $ed_names := apply (apply $.Params.editor "partial" "pub_fmt/author" ".") "chomp" "." -}}
  {{- range $ed_names -}}
  <meta itemprop="editor" content="{{ . | markdownify }}"/>
  {{- end -}}
{{- end -}}
</article>
